<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Salas - ADMIN</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">

    <style>
        .a {
            background-color: red;
        }

        .b {
            background-color: green;
        }

        .init {
            padding-top: 50px;
        }

        .dropdown-toggle::after {
            content: none;
        }

        #navbarDropdown {
            border-radius: 50px;
            background-color: rgb(67, 75, 148);
            border: 1px solid white;
        }

        .nav-link {
            text-align: center;
            border-radius: 5px;
        }

        .nav-button:hover {
            background-color: rgb(25, 41, 212);
        }

        .salas {
            padding-top: 500px;
        }

        .sala {
            height: 50px;
            border-radius: 5px;
            border: 1px solid gray;
        }

        .page-form-sala {
            position: absolute;
            bottom: 0;
            left: 0;
            top: 0;
            right: 0;
            display: none;
        }
    </style>
</head>

<body>

    <div class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container-fluid ">
            <span class="navbar-brand mb-0 h1">Reserva de Sala</span>
            <div class="justify-content-end col-3">
                <ul class="navbar-nav row">
                    <li class="nav-item col-auto align-items-center nav-button">
                        <a class="nav-link active" aria-current="page" href="#">Salas</a>
                    </li>
                    <li class="nav-item col-auto nav-button">
                        <a class="nav-link active" aria-current="page" href="#">Reservas</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>


    <div class="container">
        <div class="row justify-content-end init">
            <div id="adicionarSala" class="col-4">
                <button class="btn btn-success" onclick="activeFormSala()">Adicionar sala</button>
            </div>
        </div><br>
        <div id="salas" class="row justify-content-center">
        </div>
    </div>

    <div id="form-sala" class="container page-form-sala">
        <div class="row justify-content-center align-items-center vh-100">
            <div class="form-sala col-4">
                <form class="p-4 p-md-5 border rounded-3 bg-light" action="#" th:action="@{/sala/addSala}"
                    th:object="${sala}" method="post">
                    <div class="row justify-content-center align-items-center">
                        <div class="col-12" style="text-align: center;">
                            <h3>Cadastro de Sala</h3>
                        </div>
                        <div class="form-floating mb-3">
                            <input id="nomeSala" type="text" class="form-control" placeholder="Nome da Sala"
                                name="nome">
                            <label for="inputNome">Nome da Sala</label>
                        </div>
                        <div class="form-floating mb-3">
                            <input id="localSala" type="text" class="form-control" placeholder="Local" name="local">
                            <label for="inputLocal">Local</label>
                        </div>
                        <div class="form-floating mb-3">
                            <input id="andarSala" type="text" class="form-control" placeholder="Andar" name="andar">
                            <label for="inputAndar">Andar</label>
                        </div>
                        <div class="form-floating mb-3">
                            <input id="descricaoSala" type="text" class="form-control" placeholder="Descrição"
                                name="descricao">
                            <label for="inputNome">Descrição</label>
                        </div>
                        <div class="form-floating mb-3" style="display: none;">
                            <input type="text" class="form-control" name="id" value="${id}">
                        </div>
                        <p id="erro" style="color: red;" class="col-6"></p>

                        <button class="w-100 btn btn-lg btn-success mb-3" type="submit">Cadastrar</button>
                        <div class="w-100 btn btn-lg btn-primary" onclick="activeFormSala()">Voltar</div>
                    </div>
                </form>
            </div>
        </div>
    </div>



    <script th:inline="javascript">
        window.onload = function verificacao() {
            var erro = /*[[${erro}]]*/ "erro";
            var id = /*[[${id}]]*/ "id";
            var salas = /*[[${salas}]]*/ "salas";
            var sala = /*[[${sala}]]*/ "sala";
            
            if(erro == "erro info sala add"){
                document.getElementById("form-sala").style.display = "block";
                document.getElementById("nomeSala").value = sala.nome;
                document.getElementById("localSala").value = sala.local;
                document.getElementById("andarSala").value = sala.andar;
                document.getElementById("descricaoSala").value = sala.descricao;
                document.getElementById("erro").innerHTML = "Dados incompletos!";
            }
            if (salas != null) {
                salas.forEach(sala => {
                    document.getElementById("salas").innerHTML += "<div class='sala col-8 d-flex'>" +
                        "<div class='col-10 align-self-center'>" +
                        "<p>" + sala.nome + " - " + sala.local + "</p> " +
                            "</div>" +
                            "<div class='col-1 align-self-center'>" +
                            "<a href='http://localhost:8080/sala/infoSala/"+ sala.id +"'><button class='btn btn-primary'><svg xmlns='http://www.w3.org/2000/svg' width='16'" +
                            "height='16' fill='currentColor' class='bi bi-pencil-square' viewBox='0 0 16 16'>" +
                            "<path" +
                            "    d='M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z' />" +
                            "<path fill-rule='evenodd'" +
                            "    d='M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z' />" +
                            "</svg></button></a>" +
                            "</div>" +
                            "<div class='col-1 align-self-center'>" +
                            "<a href='http://localhost:8080/sala/deleteSala/"+ sala.id +"'><button class='btn btn-danger' aria-placeholder='Excluir'><svg" +
                            "xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='currentColor'" +
                            "class='bi bi-trash' viewBox='0 0 16 16'>" +
                            "<path" +
                            "d='M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z' />" +
                            "<path fill-rule='evenodd'" +
                            "d='M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z' />" +
                            "</svg></button></a>" +
                            "</div>" +
                            "</div>";
                });
            }
        }

        function activeFormSala() {
            if (document.getElementById("form-sala").style.display == "block") {
                document.getElementById("form-sala").style.display = "none";
                document.getElementById("nomeSala").value = "";
                document.getElementById("localSala").value = "";
                document.getElementById("andarSala").value = "";
                document.getElementById("descricaoSala").value = "";
                document.getElementById("erro").innerHTML = "";
            } else {
                document.getElementById("form-sala").style.display = "block";
            }
        }
    </script>
</body>

</html>